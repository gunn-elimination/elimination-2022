(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{3441:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/game/[game]",function(){return n(9671)}])},4262:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var s="https://api.gunnelimination.com"},9671:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(4051),r=n.n(s),a=n(5893),c=n(1163),o=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return(0,a.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){l(e,t,n[t])}))}return e}({},e,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),(0,a.jsx)("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),(0,a.jsx)("line",{x1:"12",y1:"22",x2:"12",y2:"18"})]}))}function u(e){var t=(0,o.useState)(0),n=t[0],s=t[1],r=["bg-lime-700","bg-rose-700","bg-sky-700","bg-amber-700","bg-purple-700","bg-emerald-700"];return(0,o.useEffect)((function(){var t,n;s(Number((null===(t=e.user.firstName)||void 0===t?void 0:t.charCodeAt(0))||(null===(n=e.user.lastName)||void 0===n?void 0:n.charCodeAt(0))||0)%r.length)}),[e.user.firstName,e.user.lastName]),(0,a.jsxs)("div",{className:"rounded-full justify-center text-center relative  shrink-0 flex ".concat(r[n]," text-white font-semibold text-xs ").concat(e.small?"w-6 h-6 grow":"w-7 h-7")+e.className,children:[(0,a.jsxs)("span",{className:"my-auto",children:[(e.user.firstName||[])[0],(e.user.lastName||[])[0]]}),(0,a.jsx)("span",{className:"absolute ".concat(e.small?"h-2 w-2 bottom-0 right-0":"h-3 w-3 -bottom-0.5 -right-0.5"," rounded-full  ").concat(e.user.eliminated?"bg-red-500":"bg-green-500")})]})}var x=n(4262);function f(e,t,n,s,r,a,c){try{var o=e[a](c),l=o.value}catch(i){return void n(i)}o.done?t(l):Promise.resolve(l).then(s,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var a=e.apply(t,n);function c(e){f(a,s,r,c,o,"next",e)}function o(e){f(a,s,r,c,o,"throw",e)}c(void 0)}))}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(){var n=d(r().mark((function n(s,a){var c,o,l;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(l=window.indexedDB.open("EliminationDB",1)).onerror=function(e){},l.onupgradeneeded=function(e){(c=o.createObjectStore("users",{keyPath:"userID"})).createIndex("userID","userID",{unique:!0}),c.transaction.oncomplete=function(e){}},l.onsuccess=d(r().mark((function n(){var a,c,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=l.result,a=o.transaction("users","readwrite").objectStore("users"),(c=a.get(e)).onsuccess=d(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.result){n.next=2;break}return n.abrupt("return");case 2:if(a=JSON.parse(JSON.stringify(c.result)),!t){n.next=13;break}return n.t0=Object,n.t1=a,n.next=8,fetch("".concat(x.h,"/elimination/game/").concat(t,"/user/").concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 8:n.t2=n.sent,a=n.t0.assign.call(n.t0,n.t1,n.t2),s(a),n.next=14;break;case 13:s(a);case 14:case"end":return n.stop()}}),n)}))),n.next=6,fetch("".concat(x.h,"/users/").concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 6:if(i=n.sent,o.transaction("users","readwrite").objectStore("users").put(i),!t){n.next=15;break}return n.t0=Object,n.t1=i,n.next=13,fetch("".concat(x.h,"/elimination/game/").concat(t,"/user/").concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 13:n.t2=n.sent,n.t0.assign.call(n.t0,n.t1,n.t2);case 15:s(i);case 16:case"end":return n.stop()}}),n)})));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}var h=n(9624);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){return(0,a.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){p(e,t,n[t])}))}return e}({},e,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}))}function b(e,t,n,s,r,a,c){try{var o=e[a](c),l=o.value}catch(i){return void n(i)}o.done?t(l):Promise.resolve(l).then(s,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var a=e.apply(t,n);function c(e){b(a,s,r,c,o,"next",e)}function o(e){b(a,s,r,c,o,"throw",e)}c(void 0)}))}}function g(){var e=(0,o.useContext)(h.S),t=(0,c.useRouter)(),n=(0,o.useState)({}),s=n[0],l=n[1],f=(0,o.useState)({}),d=f[0],p=f[1],b=(0,o.useState)({}),g=b[0],w=b[1],N=(0,o.useState)([]),y=N[0],k=N[1];return(0,o.useEffect)((function(){t.query.game&&v(r().mark((function n(){var s,a,c,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(x.h,"/game/").concat(t.query.game,"/"),{});case 2:if(200!==(s=n.sent).status){n.next=9;break}return n.t0=l,n.next=7,s.json();case 7:n.t1=n.sent,(0,n.t0)(n.t1);case 9:return n.next=11,fetch("".concat(x.h,"/elimination/game/").concat(t.query.game,"/user/@me/"),{headers:new Headers({"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))})});case 11:if(200!==(a=n.sent).status){n.next=25;break}return n.next=15,a.json();case 15:return c=n.sent,Object.assign(c,e),p(c),n.t2=w,n.next=21,m(c.targetID,t.query.game);case 21:n.t3=n.sent,(0,n.t2)(n.t3),n.next=30;break;case 25:return n.t4=console,n.next=28,a.text();case 28:n.t5=n.sent,n.t4.error.call(n.t4,n.t5);case 30:return n.next=32,fetch("".concat(x.h,"/elimination/game/").concat(t.query.game,"/top"),{headers:new Headers({"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))})});case 32:if(200!==(o=n.sent).status){n.next=39;break}return n.t6=k,n.next=37,o.json().then((function(e){return Promise.all(e.map(function(){var e=v(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=n,e.next=4,m(n.userID,t.query.game);case 4:return e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));case 37:n.t7=n.sent,(0,n.t6)(n.t7);case 39:case"end":return n.stop()}}),n)})))()}),[t]),(0,a.jsxs)("div",{className:"h-full w-full overflow-auto flex flex-col px-10 pb-8 pt-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:s.name}),(0,a.jsxs)("div",{className:"flex gap-4 flex-col",children:[(0,a.jsxs)("div",{className:"bg-red-600/10 flex flex-col gap-2 dark:text-red-500 text-red-800 rounded-lg py-4 px-5",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 ml-1 mb-1",children:[(0,a.jsx)(i,{className:"h-3 w-3 my-auto"}),(0,a.jsx)("span",{className:"text-sm my-auto font-bold ",children:"Your Target"})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(u,{user:g}),(0,a.jsxs)("span",{className:"text-lg my-auto font-bold ",children:[g.firstName," ",g.lastName]})]}),(0,a.jsxs)("div",{className:"flex flex-row px-10 justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:g.kills}),(0,a.jsx)("span",{children:"kills"})]}),(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsxs)("span",{className:"text-lg font-bold",children:["#",y.findIndex((function(e){return e.userID===g.userID}))+1]}),(0,a.jsx)("span",{children:"ranking"})]})]})]}),(0,a.jsxs)("div",{className:"box",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:"Controls"}),(0,a.jsxs)("div",{className:"px-5 text-center flex flex-col gap-2",children:[(0,a.jsx)("button",{className:"py-2 px-3 rounded-md bg-black text-white",children:"Display kill code"}),(0,a.jsxs)("button",{className:"py-2 px-3 rounded-md bg-black text-white",children:["Kill ",g.firstName]})]})]}),(0,a.jsxs)("div",{className:"box",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 ml-1 mb-1",children:[(0,a.jsx)(j,{className:"h-3 w-3 my-auto"}),(0,a.jsx)("span",{className:"text-sm my-auto font-bold ",children:"You"})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 ",children:[(0,a.jsx)(u,{className:"h-7 w-7",user:d}),(0,a.jsxs)("span",{className:"text-lg my-auto font-bold ",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]})]}),(0,a.jsxs)("div",{className:"flex flex-row px-10 justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:d.kills}),(0,a.jsx)("span",{children:"kills"})]}),(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsxs)("span",{className:"text-lg font-bold",children:["#",y.findIndex((function(t){return t.userID===(null===e||void 0===e?void 0:e.userID)}))+1]}),(0,a.jsx)("span",{children:"ranking"})]})]})]}),(0,a.jsxs)("div",{className:"box max-h-72",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:"Leaderboard"}),(0,a.jsxs)("div",{className:"flex flex-row justify-between text-sm font-semibold",children:[(0,a.jsx)("span",{children:"Rank"}),(0,a.jsx)("span",{children:"Kills"})]}),(0,a.jsx)("div",{className:"overflow-auto flex flex-col gap-2 h-full",children:y.map((function(e,t,n){return(0,a.jsxs)("div",{className:"flex flex-row  gap-2",children:[(0,a.jsx)("span",{className:"my-auto font-bold font-mono",children:String(t+1).padStart(3,"0")}),(0,a.jsx)(u,{small:!0,className:"my-auto",user:e}),(0,a.jsxs)("span",{className:"my-auto font-semibold mr-auto",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("span",{className:"my-auto ml-auto",children:e.kills})]},t)}))})]})]})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=3441,e(e.s=t);var t}));var t=e.O();_N_E=t}]);