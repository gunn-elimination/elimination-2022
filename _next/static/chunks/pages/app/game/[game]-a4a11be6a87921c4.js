(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{3441:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/game/[game]",function(){return n(9671)}])},4262:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var r="https://api.gunnelimination.com"},9671:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(4051),s=n.n(r),a=n(5893),l=n(1163),c=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return(0,a.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),(0,a.jsx)("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),(0,a.jsx)("line",{x1:"12",y1:"22",x2:"12",y2:"18"})]}))}function u(e){var t=(0,c.useState)(0),n=t[0],r=t[1],s=["bg-lime-700","bg-rose-700","bg-sky-700","bg-amber-700","bg-purple-700","bg-emerald-700"];return(0,c.useEffect)((function(){var t,n;r(Number((null===(t=e.user.firstName)||void 0===t?void 0:t.charCodeAt(0))||(null===(n=e.user.lastName)||void 0===n?void 0:n.charCodeAt(0))||0)%s.length)}),[e.user.firstName,e.user.lastName]),(0,a.jsxs)("div",{className:"rounded-full justify-center text-center relative  shrink-0 flex ".concat(s[n]," text-white font-semibold text-xs ").concat(e.small?"w-6 h-6 grow":"w-7 h-7")+e.className,children:[(0,a.jsxs)("span",{className:"my-auto",children:[(e.user.firstName||[])[0],(e.user.lastName||[])[0]]}),(0,a.jsx)("span",{className:"absolute ".concat(e.small?"h-2 w-2 bottom-0 right-0":"h-3 w-3 -bottom-0.5 -right-0.5"," rounded-full  ").concat(e.user.eliminated?"bg-red-500":"bg-green-500")})]})}var d=n(4262);function x(e,t,n,r,s,a,l){try{var c=e[a](l),o=c.value}catch(i){return void n(i)}c.done?t(o):Promise.resolve(o).then(r,s)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function l(e){x(a,r,s,l,c,"next",e)}function c(e){x(a,r,s,l,c,"throw",e)}l(void 0)}))}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(){var n=f(s().mark((function n(r,a){var l,c,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(o=window.indexedDB.open("EliminationDB",1)).onerror=function(e){},o.onupgradeneeded=function(e){(l=c.createObjectStore("users",{keyPath:"userID"})).createIndex("userID","userID",{unique:!0}),l.transaction.oncomplete=function(e){}},o.onsuccess=f(s().mark((function n(){var a,l,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.result,a=c.transaction("users","readwrite").objectStore("users"),(l=a.get(e)).onsuccess=f(s().mark((function n(){var a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l.result){n.next=2;break}return n.abrupt("return");case 2:if(a=JSON.parse(JSON.stringify(l.result)),!t){n.next=13;break}return n.t0=Object,n.t1=a,n.next=8,fetch("".concat(d.h,"/elimination/game/").concat(t,"/user/").concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 8:n.t2=n.sent,a=n.t0.assign.call(n.t0,n.t1,n.t2),r(a),n.next=14;break;case 13:r(a);case 14:case"end":return n.stop()}}),n)}))),n.next=6,fetch("".concat(d.h,"/users/").concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 6:if(i=n.sent,c.transaction("users","readwrite").objectStore("users").put(i),!t){n.next=15;break}return n.t0=Object,n.t1=i,n.next=13,fetch("".concat(d.h,"/elimination/game/").concat(t,"/user/").concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 13:n.t2=n.sent,n.t0.assign.call(n.t0,n.t1,n.t2);case 15:r(i);case 16:case"end":return n.stop()}}),n)})));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}var h=n(9624);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return(0,a.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},e,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}))}function b(e,t,n,r,s,a,l){try{var c=e[a](l),o=c.value}catch(i){return void n(i)}c.done?t(o):Promise.resolve(o).then(r,s)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function l(e){b(a,r,s,l,c,"next",e)}function c(e){b(a,r,s,l,c,"throw",e)}l(void 0)}))}}function v(){var e=(0,c.useContext)(h.S),t=(0,l.useRouter)(),n=(0,c.useState)(0),r=n[0],o=n[1],x=(0,c.useState)({}),f=x[0],p=x[1],b=(0,c.useState)({}),v=b[0],w=b[1],N=(0,c.useState)({}),y=N[0],k=N[1],O=(0,c.useState)([]),S=O[0],P=O[1];return(0,c.useEffect)((function(){t.query.game&&j(s().mark((function n(){var r,a,l,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(d.h,"/game/").concat(t.query.game,"/"),{});case 2:if(200!==(r=n.sent).status){n.next=9;break}return n.t0=p,n.next=7,r.json();case 7:n.t1=n.sent,(0,n.t0)(n.t1);case 9:return n.next=11,fetch("".concat(d.h,"/elimination/game/").concat(t.query.game,"/user/@me/"),{headers:new Headers({"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))})});case 11:if(200!==(a=n.sent).status){n.next=25;break}return n.next=15,a.json();case 15:return l=n.sent,Object.assign(l,e),w(l),n.t2=k,n.next=21,m(l.targetID,t.query.game);case 21:n.t3=n.sent,(0,n.t2)(n.t3),n.next=30;break;case 25:return n.t4=console,n.next=28,a.text();case 28:n.t5=n.sent,n.t4.error.call(n.t4,n.t5);case 30:return n.next=32,fetch("".concat(d.h,"/elimination/game/").concat(t.query.game,"/top"),{headers:new Headers({"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))})});case 32:if(200!==(c=n.sent).status){n.next=39;break}return n.t6=P,n.next=37,c.json().then((function(e){return Promise.all(e.map(function(){var e=j(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=n,e.next=4,m(n.userID,t.query.game);case 4:return e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));case 37:n.t7=n.sent,(0,n.t6)(n.t7);case 39:case"end":return n.stop()}}),n)})))()}),[t]),(0,a.jsxs)("div",{className:"h-full w-full overflow-auto flex flex-col px-10 pb-8 pt-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:f.name}),(0,a.jsx)("div",{className:"flex flex-row gap-1 mb-3 rounded-lg p-1",children:[{name:"Dashboard",state:0},{name:"Kill Feed",state:1}].map((function(e){return(0,a.jsx)("a",{onClick:function(){return o(e.state)},href:"#",className:"grow text-center basis-0 ".concat(r===e.state?"btn-primary text-white":"text-black dark:bg-gray-800 dark:text-white bg-gray-200"," font-semibold  rounded-md px-3 py-2"),children:e.name},e.state)}))}),(0,a.jsxs)("div",{className:"".concat(0===r?"flex":"hidden"," gap-4 h-full flex-row md:flex-col"),children:[(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"md:flex grid grid-cols-3 xl:grid-cols-2 lg:grid-cols-1 grow md:flex-col gap-3",children:[(0,a.jsxs)("div",{className:"grow dark:bg-red-700/20 bg-red-600/10 flex justify-[normal] flex-col gap-2 dark:text-red-500 text-red-800 rounded-lg py-4 px-5",children:[(0,a.jsxs)("div",{className:"flex justify-center flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 ml-1 mb-1",children:[(0,a.jsx)(i,{className:"h-3 w-3 my-auto"}),(0,a.jsx)("span",{className:"text-md my-auto font-bold ",children:"Your Target"})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(u,{user:y}),(0,a.jsxs)("span",{className:"text-lg my-auto font-bold ",children:[y.firstName," ",y.lastName]})]})]}),(0,a.jsxs)("div",{className:"flex flex-row px-10 gap-5 justify-around",children:[(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:y.kills}),(0,a.jsx)("span",{children:"kills"})]}),(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsxs)("span",{className:"text-lg font-bold",children:["#",S.findIndex((function(e){return e.userID===y.userID}))+1]}),(0,a.jsx)("span",{children:"ranking"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full box",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:"Controls"}),(0,a.jsxs)("div",{className:"px-5 text-center align-center grid grid-cols-1 mx-auto gap-2",children:[(0,a.jsx)("button",{className:"py-2 px-3 hover:bg-black dark:hover:bg-white dark:text-white dark:hover:text-black dark:border-white hover:text-white rounded-md border-black border-2 text-black",children:"Display kill code"}),(0,a.jsxs)("button",{className:"py-2 px-3 dark:bg-white dark:text-black rounded-md bg-black text-white",children:["Kill ",y.firstName]})]})]}),(0,a.jsxs)("div",{className:" box min-w-fit",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 ml-1 mb-1",children:[(0,a.jsx)(g,{className:"h-3 w-3 my-auto"}),(0,a.jsx)("span",{className:"text-md my-auto font-bold ",children:"You"})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 ",children:[(0,a.jsx)(u,{className:"h-7 w-7",user:v}),(0,a.jsxs)("span",{className:"text-lg my-auto font-bold ",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]})]}),(0,a.jsxs)("div",{className:"flex flex-row md:px-10 px-5 gap-5 justify-around",children:[(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:v.kills}),(0,a.jsx)("span",{children:"kills"})]}),(0,a.jsxs)("div",{className:"flex flex-col text-center",children:[(0,a.jsxs)("span",{className:"text-lg font-bold",children:["#",S.findIndex((function(t){return t.userID===(null===e||void 0===e?void 0:e.userID)}))+1]}),(0,a.jsx)("span",{children:"ranking"})]})]})]})]})}),(0,a.jsx)("div",{className:"ml-auto md:w-auto min-w-fit md:ml-0",children:(0,a.jsxs)("div",{className:"box h-full md:max-h-72",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:"Leaderboard"}),(0,a.jsxs)("div",{className:"flex flex-row justify-between text-md font-semibold",children:[(0,a.jsx)("span",{children:"Rank"}),(0,a.jsx)("span",{children:"Kills"})]}),(0,a.jsx)("div",{className:"overflow-auto flex flex-col gap-2 h-full",children:S.map((function(e,t,n){return(0,a.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,a.jsx)("span",{className:"my-auto font-bold font-mono",children:String(t+1).padStart(3,"0")}),(0,a.jsx)(u,{small:!0,className:"my-auto",user:e}),(0,a.jsxs)("span",{className:"my-auto font-semibold mr-5",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("span",{className:"my-auto ml-auto",children:e.kills})]},t)}))})]})})]}),(0,a.jsx)("div",{className:"".concat(1===r?"block":"hidden"," h-full w-full"),children:(0,a.jsx)("div",{className:"box",children:(0,a.jsx)("span",{children:"Kill Feed"})})})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=3441,e(e.s=t);var t}));var t=e.O();_N_E=t}]);